<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.malicn.server.dao.cloudStorage.ResLookDao" >
    <resultMap id="BaseResultMap" type="com.malicn.server.domain.cloudStorage.ResLook" >
      <id column="id" property="id" jdbcType="BIGINT" />
      <result column="storage_id" property="storageId" jdbcType="BIGINT" />
      <result column="con_person" property="conPerson" jdbcType="VARCHAR" />
      <result column="con_tel" property="conTel" jdbcType="VARCHAR" />
      <result column="look_stor_date" property="lookStorDate" jdbcType="TIMESTAMP" />
      <result column="look_stor_people" property="lookStorPeople" jdbcType="INTEGER" />
      <result column="area_required" property="areaRequired" jdbcType="DECIMAL" />
      <result column="remarks" property="remarks" jdbcType="VARCHAR" />
      <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />

        <result column="storage_name" property="storageName" jdbcType="TIMESTAMP" />

        <result column="storage_address" property="storageAddress" jdbcType="TIMESTAMP" />
    </resultMap>
    <sql id="Base_Column_List" >
      id, storage_id, con_person, con_tel, look_stor_date, look_stor_people, area_required,
      remarks, create_time
    </sql>
    <insert id="insert" parameterType="com.malicn.server.domain.cloudStorage.ResLook" >
      insert into yc_res_look (storage_id, con_person,
      con_tel, look_stor_date, look_stor_people,
      area_required, remarks, create_time
      )
      values (#{storageId,jdbcType=BIGINT}, #{conPerson,jdbcType=VARCHAR},
      #{conTel,jdbcType=VARCHAR}, #{lookStorDate,jdbcType=TIMESTAMP}, #{lookStorPeople,jdbcType=INTEGER},
      #{areaRequired,jdbcType=DECIMAL}, #{remarks,jdbcType=VARCHAR}, now()
      )
    </insert>
    <select id="list" resultMap="BaseResultMap">
        SELECT  a.id, a.storage_id, a.con_person, a.con_tel, a.look_stor_date,
        a.look_stor_people, a.area_required,
        a.remarks, a.create_time, b.storage_name, b.storage_address
        FROM yc_res_look a
        LEFT JOIN yc_storage b on a.storage_id = b.id
        WHERE LOCATE(#{storageName}, b.storage_name)
        order by a.create_time desc
    </select>
</mapper>