<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.malicn.server.dao.web.PartnerDao" >
    <resultMap id="PartnerMap" type="com.malicn.server.domain.web.Partner" >
        <id property="id" column="id" />
        <result property="name" column="name" />
        <result property="mobile" column="mobile" />
        <result property="city" column="city"/>
        <result property="industry" column="industry" />
        <result property="weixin" column="weixin"/>
        <result property="email" column="email" />
        <result property="joinType" column="join_type" />
        <result property="remark" column="remark" />
        <result property="clientIp" column="client_ip" />
        <result property="createTime" column="create_time" />
        <result property="updateTime" column="update_time" />
    </resultMap>

    <!-- 全字段 -->
    <sql id="AllColumn">
        id, name, mobile, city, industry,join_type, weixin, email, remark, client_ip, create_time, update_time
    </sql>

    <!-- 填写加盟申请 -->
    <insert id="savePartner" parameterType="com.malicn.server.domain.web.Partner" >
        INSERT INTO ml_partner_apply (name, mobile,join_type, city, industry, weixin, email, remark, client_ip, create_time, update_time)
        VALUES (#{name}, #{mobile},#{joinType}, #{city}, #{industry}, #{weixin}, #{email}, #{remark}, #{clientIp}, now(), now())
    </insert>

    <select id="selectAllListPartner" resultMap="PartnerMap">
        SELECT <include refid="AllColumn" />  FROM ml_partner_apply
        where 1=1
        <if test="name !=null and name !=''">
           and  name LIKE  concat('%',#{name},'%')
        </if>
        <if test="city !=null and city !=''">
            and  city LIKE  concat('%',#{city},'%')
        </if>
        ORDER by create_time desc
    </select>
    
</mapper>