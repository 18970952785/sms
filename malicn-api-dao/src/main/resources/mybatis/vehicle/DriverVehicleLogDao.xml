<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.malicn.server.dao.vehicle.DriverVehicleLogDao" >

	<resultMap id="driverVehicleLogMap" type="com.malicn.server.domain.vehicle.DriverVehicleLog">
		<id column="id" property="id" />
		<result column="vehicle_id" property="vehicleId" />
		<result column="driver_id" property="driverId" />
		<result column="relation_type" property="relationType" />
		<result column="create_time" property="createTime" />
		<result column="update_time" property="updateTime" />
		<result column="log_remark" property="logRemark" />
	</resultMap>
	
	<!-- 新增操作 -->
	<insert id="saveDriverVehicleLog" parameterType="com.malicn.server.domain.vehicle.DriverVehicleLog" useGeneratedKeys="true" keyProperty="id">
		INSERT INTO ml_driver_vehicle_log
		(vehicle_id,driver_id,relation_type,create_time,update_time,log_remark)
		VALUES
		(#{vehicleId},#{driverId},#{relationType},now(),now(),#{logRemark})
	</insert>
	
	<!-- 修改操作 -->
	<update id="updateDriverVehicleLog" parameterType="com.malicn.server.domain.vehicle.DriverVehicleLog" >
		UPDATE ml_driver_vehicle_log
		<set>
			<if test="vehicleId != null">
				vehicle_id = #{vehicleId},
			</if>
			<if test="driverId != null">
				driver_id = #{driverId},
			</if>
			<if test="relationType != null">
				relation_type = #{relationType},
			</if>
			<if test="logRemark != null">
				log_remark = #{logRemark},
			</if>
			update_time = now()
		</set>
		<where>
			id = #{id}
		</where>
	</update>
</mapper>