<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.malicn.server.dao.cmscmb.CmsOrderCmbDao" >
  <resultMap id="CmsOrderCmbMap" type="com.malicn.server.domain.cmscmb.CmsOrderCmb" >
    <id column="id" property="id" jdbcType="BIGINT" />
    <result column="order_id" property="orderId" jdbcType="BIGINT" />
    <result column="serial_id" property="serialId" jdbcType="VARCHAR" />
    <result column="trsamtc" property="trsamtc" jdbcType="DECIMAL" />
    <result column="transaction_time" property="transactionTime" jdbcType="TIMESTAMP" />
    <result column="transaction_type" property="transactionType" jdbcType="VARCHAR" />
    <result column="naryur" property="naryur" jdbcType="VARCHAR" />
    <result column="reqnbr" property="reqnbr" jdbcType="VARCHAR" />
    <result column="busnam" property="busnam" jdbcType="VARCHAR" />
    <result column="nusage" property="nusage" jdbcType="VARCHAR" />
    <result column="yurref" property="yurref" jdbcType="VARCHAR" />
    <result column="busnar" property="busnar" jdbcType="VARCHAR" />
    <result column="crpybbk" property="crpybbk" jdbcType="VARCHAR" />
    <result column="rpynam" property="rpynam" jdbcType="VARCHAR" />
    <result column="rpyacc" property="rpyacc" jdbcType="VARCHAR" />
    <result column="rpybbn" property="rpybbn" jdbcType="VARCHAR" />
    <result column="rpybnk" property="rpybnk" jdbcType="VARCHAR" />
    <result column="rpyadr" property="rpyadr" jdbcType="VARCHAR" />
    <result column="chknbr" property="chknbr" jdbcType="VARCHAR" />
    <result column="create_time" property="createTime" jdbcType="TIMESTAMP" />
    <result column="update_time" property="updateTime" jdbcType="TIMESTAMP" />

  </resultMap>

  <sql id="AllColumn">
    id,order_id,serial_id,trsamtc,transaction_time,transaction_type,
    naryur,reqnbr,busnam,nusage,yurref,busnar,crpybbk,rpynam,rpyacc,rpybbn,
    rpybnk,rpyadr,chknbr,create_time,update_time
  </sql>

<select id="getCmsOrderCmbByTransactionTime" parameterType="java.util.Date" resultType="java.util.Date">
    select MAX(transaction_time) AS transaction_time  from cms_order_cmb WHERE transaction_time &gt;= #{bigenDate} AND transaction_time &lt;=#{endDate}
</select>
    <!-- 插入银行交易记录 -->
    <insert id ="insert" parameterType="com.malicn.server.domain.cmscmb.CmsOrderCmb">
        insert into cms_order_cmb
        (serial_id,trsamtc,transaction_time,transaction_type,
        naryur,reqnbr,busnam,nusage,yurref,busnar,crpybbk,rpynam,rpyacc,
        rpybbn,rpybnk,rpyadr,chknbr,create_time)
        values
            (
            #{serialId},#{trsamtc},#{transactionTime},#{transactionType},
            #{naryur},#{reqnbr},#{busnam},#{nusage},#{yurref},
            #{busnar},#{crpybbk},#{rpynam},#{rpyacc},
            #{rpybbn},#{rpybnk},#{rpyadr},#{chknbr},#{createTime}
            )
    </insert >

    <insert id ="saveAll" parameterType="java.util.List">
        insert into cms_order_cmb
        (serial_id,trsamtc,transaction_time,transaction_type,
        naryur,reqnbr,busnam,nusage,yurref,busnar,crpybbk,rpynam,rpyacc,
        rpybbn,rpybnk,rpyadr,chknbr,create_time)
        values
        <foreach collection="list" item="item" index="index" separator=",">
            (
            #{item.serialId},#{item.trsamtc},#{item.transactionTime},#{item.transactionType},
            #{item.naryur},#{item.reqnbr},#{item.busnam},#{item.nusage},#{item.yurref},
            #{item.busnar},#{item.crpybbk},#{item.rpynam},#{item.rpyacc},
            #{item.rpybbn},#{item.rpybnk},#{item.rpyadr},#{item.chknbr},#{item.createTime}
            )
        </foreach>

    </insert >
</mapper>